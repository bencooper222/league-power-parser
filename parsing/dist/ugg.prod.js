(function(){const m=(b,a=!1)=>a?Number(b.replace("%","")):Number(b),n=b=>{b=b.map(a=>({"Champ Name":a[3],"Win Percent":a[1],"Play Percent":a[0],Power:a[2],"95% CI Lower Bound":a[4],"95% CI Upper Bound":a[5]}));console.table(b)},p=async b=>{b=(new TextEncoder).encode(b);b=await crypto.subtle.digest("SHA-1",b);return Array.from(new Uint8Array(b)).map(a=>a.toString(16).padStart(2,"0")).join("")},q=async(b,a="",e="",g="",h="",f="https://power.benc.me")=>{b={datetime:a,patch:e,queue:g,elo:h,champions:b.slice(0,
30)};b=JSON.stringify(b);a=await p(b);await fetch(`${"https://kvdb.io/NEjFQLMGv57omxxph5uoht"}/v2-${a}`,{method:"POST",body:b});window.open(`${f}/?s=v2-${a}`,"_blank")};(async()=>{const b=Date.now();await new Promise(c=>{let d=document.getElementsByClassName("rt-tr-group").length,l=0,r=0;const t=setInterval(()=>{window.scrollTo(0,document.body.scrollHeight);d=l;l=document.getElementsByClassName("rt-tr-group").length;(d===l&&243<=l||10<r++)&&(clearInterval(t),c())},30)});document.body.scrollTop=document.documentElement.scrollTop=
0;var a=document.getElementsByClassName("rt-tbody")[0].childNodes,e={},g=0;for(var h of a){a=h.childNodes[0];var f=a.childNodes[2].getElementsByClassName("champion-name")[0].innerHTML;const c=Number(a.childNodes[8].getElementsByTagName("span")[0].innerHTML.replaceAll(",","")),d=m(a.childNodes[4].getElementsByTagName("b")[0].innerHTML,!0);m(a.childNodes[6].getElementsByTagName("span")[0].innerHTML,!0);null==e[f]?e[f]={played:c,won:c*d}:(e[f].played+=c,e[f].won+=c*d);g+=c}a=Object.keys(e);h=[];for(var k of a){const {won:c,
played:d}=e[k];a=c/d/100;f=(a*(1-a)/d)**.5;h.push(Array.from({[1]:c/d,[0]:100*d/g,[2]:100*d/g*(c/d-50)*10,[3]:k,[4]:a-1.96*f,[5]:a+1.96*f,length:6}))}h.sort((c,d)=>d[2]-c[2]);n(h);e=new Date;e=e.toDateString()+" "+e.toTimeString();a=k=g="?";try{const c=document.querySelector(".header-patch").innerHTML,d=c.indexOf(".");g=c.slice(d-2)}catch(c){console.error("Couldn't parse patch")}try{k=document.querySelector("span.queue-type > strong:nth-child(1)").innerHTML}catch(c){console.error("Couldn't parse queue")}try{a=
document.querySelector("div.filter-select_rank:nth-child(1) > div:nth-child(1) > div:nth-child(1) > div:nth-child(1) > div:nth-child(1) > span:nth-child(2)").innerHTML}catch(c){console.error("Couldn't parse rank/elo")}console.log("Took: "+(Date.now()-b)+"ms to calculate.");await q(h,e,g,k,a)})()})();
