'use strict';(function(){function t(a,b,c){if(b.set)b.set.call(a,c);else{if(!b.writable)throw new TypeError("attempted to set read only private field");b.value=c}}function q(a,b,c){if(!b.has(a))throw new TypeError("attempted to "+c+" private field on non-instance");return b.get(a)}function r(a,b){return b.get?b.get.call(a):b.value}const u=(a,b=!1)=>b?Number(a.replace("%","")):Number(a),x=a=>{a=a.map(b=>({"Champ Name":b[3],"Win Percent":b[1],"Play Percent":b[0],Power:b[2],"95% CI Lower Bound":b[4],
"95% CI Upper Bound":b[5]}));console.table(a)},y=async a=>{a=(new TextEncoder).encode(a);a=await crypto.subtle.digest("SHA-1",a);return Array.from(new Uint8Array(a)).map(b=>b.toString(16).padStart(2,"0")).join("")},z=async(a,b="",c="",f="",g="",e="https://power.benc.me")=>{a={datetime:b,patch:c,queue:f,elo:g,champions:a.slice(0,30)};a=JSON.stringify(a);b=await y(a);await fetch(`${"https://kvdb.io/NEjFQLMGv57omxxph5uoht"}/v2-${b}`,{method:"POST",body:a});window.open(`${e}/?s=v2-${b}`,"_blank")};var n=
new WeakMap;class A{constructor(){n.set(this,{writable:!0,value:void 0})}start(){if(null!=r(this,q(this,n,"get")))throw Error("already started");var a=Date.now();t(this,q(this,n,"set"),a)}stop(){if(null==r(this,q(this,n,"get")))throw Error("never started");const a=Date.now()-r(this,q(this,n,"get"));return t(this,q(this,n,"set"),void 0),a}clear(){this.stop()}}(async()=>{const a=new A;a.start();await new Promise(d=>{let h=document.getElementsByClassName("rt-tr-group").length,k=0,l=0;const p=setInterval(()=>
{window.scrollTo(0,document.body.scrollHeight);h=k;k=document.getElementsByClassName("rt-tr-group").length;(h===k&&234<=k||10<l++)&&(clearInterval(p),d())},35)});document.body.scrollTop=document.documentElement.scrollTop=0;var b=Array.from(document.getElementsByClassName("rt-tbody")[0].childNodes);const c={};for(var f=0;f<b.length;f++){var g=b[f].childNodes[0],e=g.childNodes[2].getElementsByClassName("champion-name")[0].innerHTML,m=Number(g.childNodes[8].getElementsByTagName("span")[0].innerHTML.replace(",",
"").replace(",",""));const d=u(g.childNodes[4].getElementsByTagName("b")[0].innerHTML,!0);u(g.childNodes[6].getElementsByTagName("span")[0].innerHTML,!0);null==c[e]?c[e]={played:m,won:m*d}:(c[e].played+=m,c[e].won+=m*d)}const v=Object.values(c).reduce((d,{played:h})=>h+d,0);b=Object.keys(c).reduce((d,h)=>{const {won:k,played:l}=c[h],p=k/l/100,w=(p*(1-p)/l)**.5;return d.concat([Array.from({[1]:k/l,[0]:100*l/v,[2]:100*l/v*(k/l-50)*10,[3]:h,[4]:p-1.96*w,[5]:p+1.96*w,length:6})])},[]).sort((d,h)=>h[2]-
d[2]);x(b);f=new Date;f=f.toDateString()+" "+f.toTimeString();m=e=g="?";try{g=document.querySelector("h1.tier-list > span:nth-child(1)").innerHTML.split(" ").slice(-1)[0]}catch(d){console.error("Couldn't parse patch")}try{e=document.querySelector("span.queue-type > strong:nth-child(1)").innerHTML}catch(d){console.error("Couldn't parse queue")}try{m=document.querySelector("div.filter-select_rank:nth-child(1) > div:nth-child(1) > div:nth-child(1) > div:nth-child(1) > div:nth-child(1) > span:nth-child(2)").innerHTML}catch(d){console.error("Couldn't parse rank/elo")}console.log("Took: "+
a.stop()+"ms to calculate.");await z(b,f,g,e,m)})()})();
