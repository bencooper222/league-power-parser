'use strict';(function(){function q(b,a,c){if(a.set)a.set.call(b,c);else{if(!a.writable)throw new TypeError("attempted to set read only private field");a.value=c}}function l(b,a,c){if(!a.has(b))throw new TypeError("attempted to "+c+" private field on non-instance");return a.get(b)}function p(b,a){return a.get?a.get.call(b):a.value}const r=(b,a=!1)=>a?Number(b.replace("%","")):Number(b),t=b=>{b=b.map(a=>({"Champ Name":a[3],"Win Percent":a[1],"Play Percent":a[0],Power:a[2],"95% CI Lower Bound":a[4],
"95% CI Upper Bound":a[5]}));console.table(b)},u=async b=>{b=(new TextEncoder).encode(b);b=await crypto.subtle.digest("SHA-1",b);return Array.from(new Uint8Array(b)).map(a=>a.toString(16).padStart(2,"0")).join("")},v=async(b,a="",c="",g="",f="",h="https://power.benc.me")=>{b={datetime:a,patch:c,queue:g,elo:f,champions:b.slice(0,30)};b=JSON.stringify(b);a=await u(b);await fetch(`${"https://kvdb.io/NEjFQLMGv57omxxph5uoht"}/v2-${a}`,{method:"POST",body:b});window.open(`${h}/?s=v2-${a}`,"_blank")};var k=
new WeakMap;class w{constructor(){k.set(this,{writable:!0,value:void 0})}start(){if(null!=p(this,l(this,k,"get")))throw Error("already started");var b=Date.now();q(this,l(this,k,"set"),b)}stop(){if(null==p(this,l(this,k,"get")))throw Error("never started");const b=Date.now()-p(this,l(this,k,"get"));return q(this,l(this,k,"set"),void 0),b}clear(){this.stop()}}(async()=>{const b=new w;b.start();await new Promise(d=>{let e=document.getElementsByClassName("rt-tr-group").length,n=0,x=0;const y=setInterval(()=>
{window.scrollTo(0,document.body.scrollHeight);e=n;n=document.getElementsByClassName("rt-tr-group").length;(e===n&&234<=n||10<x++)&&(clearInterval(y),d())},35)});document.body.scrollTop=document.documentElement.scrollTop=0;var a=Array.from(document.getElementsByClassName("rt-tbody")[0].childNodes),c={};for(var g=0;g<a.length;g++){var f=a[g].childNodes[0],h=f.childNodes[2].getElementsByClassName("champion-name")[0].innerHTML;const d=Number(f.childNodes[8].getElementsByTagName("span")[0].innerHTML.replace(",",
"").replace(",","")),e=r(f.childNodes[4].getElementsByTagName("b")[0].innerHTML,!0);r(f.childNodes[6].getElementsByTagName("span")[0].innerHTML,!0);null==c[h]?c[h]={played:d,won:d*e}:(c[h].played+=d,c[h].won+=d*e)}g=Object.values(c).reduce((d,{played:e})=>e+d,0);f=Object.keys(c);a=[];for(var m of f){const {won:d,played:e}=c[m];f=d/e/100;h=(f*(1-f)/e)**.5;a.push(Array.from({[1]:d/e,[0]:100*e/g,[2]:100*e/g*(d/e-50)*10,[3]:m,[4]:f-1.96*h,[5]:f+1.96*h,length:6}))}a.sort((d,e)=>e[2]-d[2]);t(a);c=new Date;
c=c.toDateString()+" "+c.toTimeString();f=g=m="?";try{const d=document.querySelector(".header-patch").innerHTML,e=d.indexOf(".");m=d.slice(e-2)}catch(d){console.error("Couldn't parse patch")}try{g=document.querySelector("span.queue-type > strong:nth-child(1)").innerHTML}catch(d){console.error("Couldn't parse queue")}try{f=document.querySelector("div.filter-select_rank:nth-child(1) > div:nth-child(1) > div:nth-child(1) > div:nth-child(1) > div:nth-child(1) > span:nth-child(2)").innerHTML}catch(d){console.error("Couldn't parse rank/elo")}console.log("Took: "+
b.stop()+"ms to calculate.");await v(a,c,m,g,f)})()})();
